<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My SMS Control Panel</title>
    <style>
        /* Basic CSS for a clean look */
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; margin: 0; padding: 20px; background-color: #eef1f5; color: #333; line-height: 1.6; }
        .container { max-width: 850px; margin: 20px auto; background-color: #ffffff; padding: 30px; border-radius: 12px; box-shadow: 0 4px 15px rgba(0,0,0,0.1); }
        h1 { text-align: center; color: #2c3e50; margin-bottom: 25px; border-bottom: 2px solid #3498db; padding-bottom: 15px; }
        h2 { color: #34495e; margin-top: 30px; margin-bottom: 15px; border-bottom: 1px solid #ddd; padding-bottom: 8px; }

        /* Send SMS Form Section */
        .info-message { background-color: #e8f0fe; border-left: 5px solid #3498db; padding: 15px 20px; margin-bottom: 25px; border-radius: 8px; font-size: 0.95em; color: #2c3e50; }
        .info-message strong { color: #2980b9; }
        form { background-color: #f9f9f9; padding: 25px; border-radius: 10px; border: 1px solid #eee; margin-bottom: 30px; }
        label { display: block; margin-bottom: 8px; font-weight: bold; color: #555; }
        input[type="text"], textarea { width: calc(100% - 22px); padding: 12px; margin-bottom: 18px; border: 1px solid #ccc; border-radius: 6px; font-size: 1em; box-sizing: border-box; }
        textarea { resize: vertical; min-height: 80px; }
        input[type="submit"] { background-color: #3498db; color: white; padding: 12px 25px; border: none; border-radius: 6px; cursor: pointer; font-size: 1.05em; transition: background-color 0.3s ease; }
        input[type="submit"]:hover { background-color: #2980b9; }

        /* SMS Messages Display Section */
        .sms-container { border: 1px solid #e0e0e0; padding: 20px; border-radius: 10px; background-color: #fcfcfc; }
        .sms-item { background-color: #f0f4f7; padding: 15px; margin-bottom: 15px; border-radius: 8px; box-shadow: 0 2px 5px rgba(0,0,0,0.05); display: flex; flex-direction: column; }
        .sms-item.received { background-color: #e6ffe6; border-left: 6px solid #28a745; } /* Green for received */
        .sms-item.sent { background-color: #e0f2f7; border-right: 6px solid #007bff; text-align: right; align-items: flex-end; } /* Blue for sent */
        .sms-item strong { display: block; margin-bottom: 8px; font-size: 1.1em; color: #2c3e50; }
        .sms-item p { margin: 0 0 8px 0; white-space: pre-wrap; word-wrap: break-word; font-size: 0.95em; } /* Preserve newlines */
        .sms-item span { font-size: 0.8em; color: #7f8c8d; display: block; }
        .sms-item.sent span { text-align: right; }
        
        /* No messages found */
        .no-messages { text-align: center; padding: 30px; color: #777; font-style: italic; }
    </style>
</head>
<body>
    <div class="container">
        <h1>My SMS Control Panel</h1>

        <div class="info-message">
            <h2>Send SMS (Feature to be implemented in App)</h2>
            <p>
                <strong>Note:</strong> Direct SMS sending from this website is not yet functional.
                It requires your Android app to periodically poll this server for "send" commands
                or utilize push notifications (like Firebase Cloud Messaging) to trigger SMS sending.
                The current app primarily focuses on uploading received messages.
                The form below is a placeholder for future implementation.
            </p>
        </div>
        
        <form action="#" method="POST">
            <label for="to_number">To Number:</label>
            <input type="text" id="to_number" name="to_number" placeholder="e.g., +919876543210" required><br>
            <label for="message_text">Message:</label>
            <textarea id="message_text" name="message_text" rows="4" placeholder="Enter your message here" required></textarea><br>
            <input type="submit" value="Send SMS (Requires App Integration)">
        </form>

        <h2>All Your SMS Messages</h2>
        <div class="sms-container">
            {% if sms_messages %}
                {% for sms in sms_messages %}
                    <div class="sms-item {{ sms.type }}">
                        <strong>{{ sms.type | capitalize }}: {{ sms.sender }}</strong>
                        <p>{{ sms.message | replace('\n', '<br>') | safe }}</p>
                        <span>{{ sms.timestamp }}</span>
                    </div>
                {% endfor %}
            {% else %}
                <p class="no-messages">No SMS messages yet. Send an SMS from your registered phone to see it here!</p>
            {% endif %}
        </div>
    </div>
</body>
</html>
